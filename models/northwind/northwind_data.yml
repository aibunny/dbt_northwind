version: 2

sources:
  - name: northwind_data
    schema: public
    tables:
      - name: order_details
      - name: customers
      - name: products
      - name: orders

models:
  - name: customer_orders
    description: 'Aggregated customer order information'
    meta:
      joins:
        - join: orders
          sql_on: ${customer_orders.order_id} = ${orders.order_id}
    columns:
      - name: customer_id
        meta:
          dimension:
            type: number
            label: 'Customer ID'
            description: 'The unique identifier for a customer.'
      - name: company_name
        meta:
          dimension:
            type: string
            label: 'Company Name'
            description: 'The name of the customer company.'
      - name: num_products_ordered
        meta:
          dimension:
            type: number
            label: 'Number of Products Ordered'
            description: 'The total number of products ordered.'
      - name: total_order_amount
        meta:
          dimension:
            type: number
            label: 'Total Order Amount'
            description: 'The total amount of the order.'

  - name: order_trends
    description: 'Product order trends'
    meta:
      joins:
        - join: order_details
          sql_on: ${order_trends.product_id} = ${order_details.product_id}
    columns:
      - name: product_id
        meta:
          dimension:
            type: number
            label: 'Product ID'
            description: 'The unique identifier for a product.'
      - name: num_orders
        meta:
          dimension:
            type: number
            label: 'Number of Orders'
            description: 'The total number of orders for the product.'
      - name: total_quantity
        meta:
          dimension:
            type: number
            label: 'Total Quantity'
            description: 'The total quantity of the product ordered.'

  - name: product_sales
    description: 'Product sales information'
    meta:
      joins:
        - join: products
          sql_on: ${product_sales.product_id} = ${products.product_id}
        - join: order_details
          sql_on: ${product_sales.product_id} = ${order_details.product_id}
    columns:
      - name: product_name
        meta:
          dimension:
            type: string
            label: 'Product Name'
            description: 'The name of the product.'
      - name: num_orders
        meta:
          dimension:
            type: number
            label: 'Number of Orders'
            description: 'The total number of orders for the product.'
      - name: total_sales
        meta:
          dimension:
            type: number
            label: 'Total Sales'
            description: 'The total sales amount for the product.'

  - name: product_availability
    description: 'Product availability information'
    meta:
      joins:
        - join: products
          sql_on: ${product_availability.product_id} = ${products.product_id}
    columns:
      - name: product_name
        meta:
          dimension:
            type: string
            label: 'Product Name'
            description: 'The name of the product.'
      - name: units_in_stock
        meta:
          dimension:
            type: number
            label: 'Units in Stock'
            description: 'The number of units currently in stock.'
      - name: units_on_order
        meta:
          dimension:
            type: number
            label: 'Units on Order'
            description: 'The number of units currently on order.'
      - name: reorder_level
        meta:
          dimension:
            type: number
            label: 'Reorder Level'
            description: 'The reorder level for the product.'
      - name: stock_status
        meta:
          dimension:
            type: string
            label: 'Stock Status'
            description: 'The stock status of the product.'
